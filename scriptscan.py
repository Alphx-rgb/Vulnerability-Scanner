import requests
from selenium import webdriver
import os
from selenium.webdriver.chrome.options import Options
def scriptscan(url):
    try:
        os.mkdir('report')
        os.chdir('report')
    except:
        os.chdir('report')    
    try:
        os.mkdir('Script Scan Results')
        os.chdir('Script Scan Results')
    except:
        os.chdir('Script Scan Results')    
    f=open("file.txt","wb")
    os.chdir('./../..')
    chrome_options = Options()

    chrome_options.add_argument('--headless')

    chrome_options.add_argument('--no-sandbox')

    chrome_options.add_argument('--disable-dev-shm-usage')
    driver = webdriver.Chrome(executable_path=r"D:\Dhanbad\chromedriver.exe",chrome_options=chrome_options)
    driver.get(url)
    pageSource = driver.page_source
    driver.quit()
    urll="https://shellray.com/upload"
    f.write(pageSource.encode())
    f.close()
    req=requests.post(urll,files={"file":'file.txt'})
    os.chdir('report')
    os.chdir('Script Scan Results')
    os.remove('file.txt')
    f=open("file.txt","w")
    print(req.text)
    f.write(req.text)
    f.close()
    os.chdir('./../..')



