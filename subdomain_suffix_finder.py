import tldextract
import requests
import os
def suffix_subdomain(url):
    print(os.getcwd() + "adsds")
    os.chdir("./..")
    try:
        os.mkdir('report')
        os.chdir('report')
    except:
        os.chdir('report')
    try:
        os.mkdir('Data_Scraped')
        os.chdir('Data_Scraped')
    except:
        os.chdir('Data_Scraped')
    #print(os.getcwd())
    f1=open("'Subdomains Founded'.txt","w")
    os.chdir("./../..")
    print(os.getcwd())
    f1.write("Status Code\t\tURL\t\tredircted URL(if any)\n")
    ext=tldextract.extract(url)
    for i in range(1):  #change this to number of times you need to scan
        with open(f"subdomains{i}.txt","r") as f:
            for i in range(10): #change this to the number of words you want to scan
                subdomain=f.readline()
                urll = "https://" + subdomain[:-1] + "." +  ext.domain + "." + ext.suffix #[:-1] is because to remove "\n"
                try:
                    client=requests.get(urll)
                    if(client.status_code==200):
                        f1.write("200\t\t" + urll +"\n" )
                    if(300<client.status_code<400):
                        f1.write(client.status_code + "\t\t\t\t" +urll + "\t\t\t\t\t"+  client.url+":")
                        # print("redireced link:",end="")
                        for response in (client.history):
                            f1.write(response.url + ",")
                        f1.write("\n")
                except:
                    pass
        f.close()
        f1.close()
    ###################################################

